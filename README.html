<a href="https://travis-ci.org/luoliyan/chinese-support-redux"><img src="https://travis-ci.org/luoliyan/chinese-support-redux.svg?branch=master" alt="Build Status" /></a> <a href="https://coveralls.io/github/luoliyan/chinese-support-redux?branch=master"><img src="https://coveralls.io/repos/github/luoliyan/chinese-support-redux/badge.svg?branch=master" alt="Coverage Status" /></a>


A rewrite and port of the Chinese Support add-on to Anki 2.1.

<b><i>Features</i></b>

<ul><li>Automatic field filling<ul><li>Translation (from built-in dictionary; supports English, German and French)</li><li>Romanisation (supports <a href="https://en.wikipedia.org/wiki/Pinyin">Pīnyīn (拼音)</a> and Cantonese <a href="https://en.wikipedia.org/wiki/Jyutping">Jyutping (粵拼)</a>)</li><li>Mandarin Audio (fetched from Google or Baidu)</li><li>Traditional (繁體字) and simplified (簡體字) characters</li><li><a href="https://en.wikipedia.org/wiki/Bopomofo">Bopomofo (ㄅㄆㄇㄈ)</a>, also known as Zhuyin (注音)</li></ul></li><li>Tone colours (applied to characters, romanisation and Bopomofo)</li><li>Built-in note types (Basic and Advanced)</li></ul>
<b><i>Status</i></b>

The vast majority of features have been successfully ported, and the add-on is in a usable state, albeit with some definite rough edges.

The add-on is still in beta. By this I mean “it works, but I wouldn’t trust it with my children”. Expect occasional issues, and please make a back-up before trying it. I use it myself and haven't experienced data loss, but <i>your</i> mileage may vary.

Please report any issues <a href="https://github.com/luoliyan/chinese-support-redux/issues">here</a> on GitHub. Feature requests are also welcome.

If you are new to the Chinese Support add-on, the wiki from the previous version is still relevant (<a href="https://github.com/ttempe/chinese-support-addon/wiki">here</a>).

<b><i>Usage</i></b>

The core feature of the add-on is the automatic field filling. To take advantage of this, you need to have an Anki note type with the appropriate fields (e.g., <code>Hanzi</code>, <code>Meaning</code>, <code>Reading</code>, <code>Sound</code>). If you don't already have such a note type, the easiest way to create one is to use the built-in model:

<ol><li>Navigate to Tools → Manage Note Types (or press <code><b>Ctrl</b></code>+<code><b>Shift</b></code>+<code><b>N</b></code>)</li><li>Click <code>Add</code></li><li>Select <code>Add: Chinese (basic)</code></li><li>Click <code>OK</code></li><li>Click <code>OK</code> again</li><li>Click <code>Close</code></li></ol>
Then, to use the field filling features:

<ol><li>Add a new note to Anki (press <code><b>a</b></code>)</li><li>Select <code>Chinese (basic)</code> as the note type</li><li>Enable Chinese Support Redux for this note type (click <code>汉字</code>)</li><li>Enter a word (e.g., 電話) in the <code>Hanzi</code> field</li><li>Press <code><b>Tab</b></code></li><li>The remaining fields should then be populated automatically</li></ol>
<b><i>Screenshots</i></b>

<img src="https://raw.githubusercontent.com/luoliyan/chinese-support/master/screenshots/add-card.png" alt="Screenshot #1" />

<img src="https://raw.githubusercontent.com/luoliyan/chinese-support/master/screenshots/view-card.png" alt="Screenshot #2" />

<b><i>History</i></b>

<ul><li><b>2019.01.01</b><ul><li>Fix bulk filling of Pinyin</li><li>Refactor several near-duplicate functions</li><li>Expand tests</li></ul></li><li><b>2018.12.25</b><ul><li>Fix accentuate call errors</li><li>Fix handling of punctuation by colorize functions</li><li>Try to identify sentences vs. vocab and handle appropriately</li><li>Respect word separation in Hanzi field</li><li>Add Chinese->English punctuation mapping</li><li>Don't apply tone number to punctuation</li><li>Save configuration on exit</li><li>Expand tests</li><li>Tweak regular expressions</li><li>Tweak searchable HTML formatting</li></ul></li><li><b>2018.11.30</b><ul><li>Update gTTS-token (fixes TTS error)</li></ul></li><li><b>2018.11.15</b><ul><li>Expand tests</li><li>Fix and refactor definition filling code</li><li>Fix incorrect fill counts</li></ul></li><li><b>2018.11.14</b><ul><li>Remove bogus tone number from TTS input</li><li>Simplify inclusion of required libs</li></ul></li><li><b>2018.11.13</b><ul><li>Fix incorrect model names</li><li>Expand and refactor tests</li></ul></li><li><b>2018.11.09</b><ul><li>Fix field filling for alternative forms</li><li>Fix bulk field filling</li><li>Fix and relocate menu</li><li>Add models automatically on start-up</li><li>Refactor tests</li><li>Tweak configuration</li></ul></li><li><b>2018.10.26</b><ul><li>Fix Pinyin and Bopomofo coloring</li><li>Fix classifier rubies (show one ruby per classifier)</li><li>Handle non-hanzi in Hanzi field <i>slightly</i> more gracefully</li><li>Only attempt to add DB indices on first run</li></ul></li><li><b>2018.10.25</b><ul><li>Major refactoring and test expansion</li><li>Functions under test should be more reliable</li><li>Functions not under test are still black magic</li><li>Fix several issues with Bopomofo handling</li><li>Fix filling of classifier field</li><li>Make splitting of Pinyin optional (internally)</li></ul></li><li><b>2018.10.12</b><ul><li>Improve handling of Pinyin (will no longer split)</li><li>Refactor start-up code</li><li>Expand and refactor tests</li></ul></li><li><b>2018.10.11</b><ul><li>Bundle Google TTS dependencies</li><li>Improve character selection (courtesy of infernalis)</li></ul></li><li><b>2018.10.10</b><ul><li>Refactor TTS code</li><li>Remove Cantonese TTS (discontinued by Google)</li></ul></li><li><b>2018.10.09</b><ul><li>Restore Google TTS (again)</li><li>Begin seriously starting to wrap tests around this old, buggy code</li></ul></li><li><b>2018.02.17</b><ul><li>Fix <i>Fill Incomplete Notes</i> functionality</li></ul></li><li><b>2017.11.14</b><ul><li>Fix more issues with automatic field population</li><li>Move field names into configuration file</li></ul></li><li><b>2017.11.10</b><ul><li>Use Anki 2.1 built-in config facilities</li></ul></li><li><b>2017.11.07</b><ul><li>Fix issues with automatic field population</li></ul></li><li><b>2017.11.06</b><ul><li>Restore Google TTS (for Mandarin and Cantonese)</li></ul></li><li><b>2017.11.05</b><ul><li>Initial port to Anki 2.1 (most features working)</li><li>Restore tone colours in editor</li></ul></li></ul>